.TH S9S-pool-controllerS 1 "june 1, 2025"

.SH NAME
s9s-pool-controllers\- Command-line client for the Severalnines ClusterControl server.

.SH SYNOPSIS
.B s9s-pool-controllers
.RI [OPTION]... 
.RI [PATH]...

.SH DESCRIPTION
\fBs9s-pool-controllers\fP is a command-line tool for ClusterControl, which can be used to 
read controllers pool information stored on database.
Controllers pool is a set of ClusterControl instances pointing to the same db and using same configuration so existing clusters are assigned among available controllers in pool.

.SH OPTIONS
.SS "Main Option"
The application should always be started using a main option that sets what operation
should be performed. This "main option" should be one of the following:

.TP
.B --list
Gets existing controllers on pool. When providing '--controller-id' specific controller is returned.
Use 0 or ommit options to get all existing whatchlist.
Role 'member' is a controller in pool while 'main' means that it also stores configuration and cmon db.
.nf
s9s pool-controllers --list --controller-id="2" 
ID  HOSTNAME    PORT STATUS ROLE CLUSTERS                    
2   kaitoserver 9500 active main 481,480,479,477,473,472,471
.fi

.TP
.B --assigned-controller
Gets existing controller assigned to provided cluster. Providing '--cluster-id' is mandatory
.nf
s9s pool-controllers --assignment --cluster-id="2"
ID  HOSTNAME    PORT STATUS ROLE CLUSTERS                    
2   kaitoserver 9500 active main 481,480,479,477,473,472,471
.fi

.TP
.B --set-pool-mode
Sets existing controller on pool mode (EXTRA_OPTS=--pool on /etc/default/cmon) and restarts service if needed. Controller status will be 'restarting' or 'active' if no changes were needed.
No controller_id is required as affected controller is the one receiving the rpc request
.RS
.TP
.B --conf-storage=MODE
Optional storage backend for controller configuration when enabling pool mode. Allowed values: 'nfs' or 'k8s'. If omitted, no 'conf_storage' is set on the operation.
.RE
.nf
s9s pool-controllers --set-pool-mode
Pool mode set successfully.
.fi

.TP
.B --unset-pool-mode
Removes existing controller on pool mode and restarts service if needed. Controller status will be 'restarting' or 'active' if no changes were needed.
No controller_id is required as affected controller is the one receiving the rpc request
.nf
s9s pool-controllers --unset-pool-mode
Pool mode unset successfully.
.fi

.TP
.B --add-controller
Installs and sets up new controller instance running in pool mode.
Providing node hostname with '--nodes' is mandatory.
.nf
s9s pool-controllers --add-controller --nodes=10.16.186.189 --provider-version=2.3.4-17176
.fi

.TP
.B --start
Starts a controller instance. The '--controller-id' option is mandatory.
.nf
s9s pool-controllers --start --controller-id=2
Controller started successfully.
.fi

.TP
.B --stop
Stops a controller instance. The '--controller-id' option is mandatory.
.nf
s9s pool-controllers --stop --controller-id=2
Controller stopped successfully.
.fi

.\"
.\" Arguments related to list operations
.\"
.TP
.BI \-\^\-controller-id=ID
This option can be used on list operations to avoid retrieving all controllers
The ID must be positive corresponding to an existing controller or zero to get all controllers.
For start and stop operations, this option is mandatory and must specify a valid controller ID.

.TP
.B --print-deployment-info
When listing controllers, print all controllers including those without dynamic status.
By default only controllers with dynamic status ('stopped', 'starting', 'active', 'standalone') are shown.

.TP
.BI \-\^\-provider-version=VERSION
Controller version to be installed.
